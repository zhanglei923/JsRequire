/* 
 * JsRequire 0.4
 * https://github.com/zhanglei923/JsRequire/
 * Date: 2013-09-16 
 * 
 * Copyright (c) 2013 ZhangLei
 * 
 * Author: ZhangLei
 * Homepage: https://github.com/zhanglei923 
 * Email: zhang.lei.923@gmail.com 
 * 
 * Under the term of the MIT License
 * http://www.opensource.org/licenses/mit-license.php
*/!function(){function a(a,b){for(s in b)a[s]=b[s];return b=null,a}function b(a,d){var f=c(a);f?e(f,function(){a.put(f,!0),b(a,d)}):"undefined"!=typeof d&&d&&d()}function c(a){var b;return a.each(function(a,c){return 0==c?(b=a,!1):void 0}),b}function d(a){return l.dependents[a]}function e(a,b){if(!u[a]&&(u[a]=!0,null!=document.getElementsByTagName("head")&&null!=document.getElementsByTagName("body"))){var c=document.getElementsByTagName("HEAD").item(0);document.getElementsByTagName("body");var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.addEventListener?(d.addEventListener("load",b,!1),d.addEventListener("error",f,!1)):d.attachEvent&&d.attachEvent("onreadystatechange",function(a){g(a,b)}),c.appendChild(d),d.src=a}}function f(){throw new Error("load error")}function g(a,b){var c=a.srcElement;if("loaded"!=c.readyState)throw new Error("load error");b.call(c)}window.FancyMap=function(){function a(a,b){a.splice(b,1)}function b(a){var c="";for(s in a){var d,e=a[s];d="object"==typeof e?b(e):e,c=c+","+s+":"+d}return c}var c=new Array,d=new Array,e=new Array,f=this,g=function(a){return c[a]};f.get=g;var h=function(a){return c[d[a]]};f.getByIndex=h;var i=function(a){return null!=e[a]};f.has=i;var j=function(a,b){e[a]||(d[d.length]=a,e[a]="exist"),c[a]=b};f.put=j;var k=function(){return d};f.getKeys=k;var l=function(a,b){"undefined"==typeof b&&(b=!0),a.each(function(a,c){!b&&g(a)||j(a,c)})};f.putAll=l;var m=function(a){for(var b=k(),c=0,d=b.length;d>c;c++){var e=b[c],f=a(e,g(e));if("undefined"!=typeof f&&(0==f||null==f))break}};f.each=m;var n=function(){return d.length};f.size=f.getLength=n;var o=function(b){for(var f=k(),g=0,h=f.length;h>g;g++){var i=f[g];i==b&&(a(d,g),c[b]=null,e[b]=null)}};f.remove=f.del=o;var p=function(a){for(var b=0,c=d.length;c>b;b++)if(d[b]===a)return b};f.getKeyIdx=f.getKeyIndex=p;var q=function(){c=new Array,d=new Array,e=new Array};f.clean=q;var r=function(a){var c=[],d="object"==typeof a?!0:!1;return m(function(e,f){var g,h;f===a?c[c.length]=e:(d?(g=f+":"+b(f),h=a+":"+b(a)):(g=f,h=a),g===h&&(c[c.length]=e))}),c};f.getKeysByVal=r};var h=window.jsrequire={},i=[],j=new FancyMap,k=new FancyMap,l={};h.define=function(b){l=a(l,b);var c=l.script;if(c)for(key in c)i[key]=c[key];var d=l.css;if(d&&t(d))for(var e=0,f=d.length;f>e;e++)k.put(d[e],!1)};var m=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d];p(f,c),c[c.length]=r(f)}q(c,b)};h.load=function(a){var b=r(a);b&&".css"==b.slice(-4)?k.put(b,!1):j.put(b,!1)};var n=function(a){var b=[];j.each(function(a){b[b.length]=r(a)}),q(b,a)};h.ready=function(a,b){k.each(function(a){w(a)}),document.body?o(a,b):"undefined"!=typeof jQuery?jQuery(document).ready(function(){o(a,b)}):document.all?window.attachEvent("onload",o(a,b)):window.addEventListener("load",o(a,b),!1)};var o=function(a,b){"function"==typeof a&&n(a),t(a)&&"function"==typeof b&&m(a,b)},p=function(a,b){var c=d(a);if(c)for(var e=0,f=c.length;f>e;e++){var g=c[e];p(g,b),b[b.length]=r(g)}},q=function(a,c){"string"==typeof a&&(a=[a]);for(var d=new FancyMap,e=0,f=a.length;f>e;e++){var g=a[e];d.put(g,!1)}j.putAll(d,!1),b(j,c)},r=function(a){return i[a]?i[a]:a},t=function(a){return"object"!=typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)},u=[],v=[],w=function(a){if(!v[a]&&null!=document.getElementsByTagName("head")){var b=document.getElementsByTagName("HEAD").item(0),c=document.createElement("link");b.appendChild(c);try{c.rel="stylesheet",c.type="text/css",c.href=a}catch(d){try{c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}catch(d){}}return v[a]=!0,c}}}();