/* 
 * JsRequire 0.6
 * https://github.com/zhanglei923/JsRequire/
 * Date: 2013-09-24 
 * 
 * Copyright (c) 2013 ZhangLei
 * 
 * Author: ZhangLei
 * Homepage: https://github.com/zhanglei923 
 * Email: zhang.lei.923@gmail.com 
 * 
 * Under the term of the MIT License
 * http://www.opensource.org/licenses/mit-license.php
*/!function(){function a(a,b){for(s in b)a[s]=b[s];return b=null,a}function b(a,d){var f=c(a);f?e(f,function(){a.put(f,!0),b(a,d)}):"undefined"!=typeof d&&d&&d()}function c(a){var b;return a.each(function(a,c){return 0==c?(b=a,!1):void 0}),b}function d(a){return l.dependents[a]}function e(a,b){if(!w[a]&&(w[a]=!0,null!=document.getElementsByTagName("head")&&null!=document.getElementsByTagName("body"))){var c=document.getElementsByTagName("HEAD").item(0);document.getElementsByTagName("body");var d=document.createElement("script");d.setAttribute("type","text/javascript"),d.addEventListener?(d.addEventListener("load",b,!1),d.addEventListener("error",function(b,c){f(b,c,a)},!1)):d.attachEvent&&d.attachEvent("onreadystatechange",function(a){g(a,b)}),c.appendChild(d),d.src=a}}function f(a,b,c){throw new Error("load error: "+c)}function g(a,b){var c=a.srcElement;if("loaded"!=c.readyState)throw new Error("load error");b.call(c)}var h=window.jsrequire={},i=[],j=new FancyMap,k=new FancyMap,l={};h.define=function(b){l=a(l,b);var c=l.script;if(c)for(key in c)i[key]=c[key];var d=l.css;if(d&&v(d))for(var e=0,f=d.length;f>e;e++)k.put(d[e],!1)};var m=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d];r(f,c),c[c.length]=u(f)}t(c,b)},n=function(a){var b=u(a);return b&&".css"==b.slice(-4)?k.put(b,!1):j.put(b,!1),{load:n,ready:h.ready}};h.load=n;var o=function(a){var b=[];j.each(function(a){b[b.length]=u(a)}),t(b,a)},p=function(a,b){k.each(function(a){y(a)}),document.body?q(a,b):"undefined"!=typeof jQuery?jQuery(document).ready(function(){q(a,b)}):document.all?window.attachEvent("onload",q(a,b)):window.addEventListener("load",q(a,b),!1)};h.ready=p;var q=function(a,b){"function"==typeof a&&o(a),v(a)&&"function"==typeof b&&m(a,b)},r=function(a,b){var c=d(a);if(c)for(var e=0,f=c.length;f>e;e++){var g=c[e];r(g,b),b[b.length]=u(g)}},t=function(a,c){"string"==typeof a&&(a=[a]);for(var d=new FancyMap,e=0,f=a.length;f>e;e++){var g=a[e];d.put(g,!1)}j.putAll(d,!1),b(j,c)},u=function(a){return i[a]?i[a]:a},v=function(a){return"object"!=typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)},w=[],x=[],y=function(a){if(!x[a]&&null!=document.getElementsByTagName("head")){var b=document.getElementsByTagName("HEAD").item(0),c=document.createElement("link");b.appendChild(c);try{c.rel="stylesheet",c.type="text/css",c.href=a}catch(d){try{c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}catch(d){}}return x[a]=!0,c}}}();