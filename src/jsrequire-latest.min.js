/* 
 * JsRequire 0.2
 * https://github.com/zhanglei923/JsRequire/
 * Date: 2013-09-13 
 * 
 * Copyright (c) 2013 ZhangLei
 * 
 * Author: ZhangLei
 * Homepage: https://github.com/zhanglei923 
 * Email: zhang.lei.923@gmail.com 
 * 
 * Under the term of the MIT License
 * http://www.opensource.org/licenses/mit-license.php
*/!function(){function a(a,b){for(s in b)a[s]=b[s];return b=null,a}function b(a,d){var f=c(a);f?e(f,function(){a.put(f,!0),b(a,d)}):"undefined"!=typeof d&&d&&d()}function c(a){var b;return a.each(function(a,c){return 0==c?(b=a,!1):void 0}),b}function d(a){return k.wait[a]}function e(a,b){if(!r[a]&&(r[a]=!0,null!=document.getElementsByTagName("head")&&null!=document.getElementsByTagName("body"))){var c=document.getElementsByTagName("HEAD").item(0),d=document.createElement("script");d.setAttribute("type","text/javascript"),d.addEventListener?d.addEventListener("load",b,!1):d.attachEvent&&d.attachEvent("onreadystatechange",function(a){f(a,b)}),c.appendChild(d),d.src=a}}function f(a,b){var c=a.srcElement;"loaded"==c.readyState&&b.call(c)}window.FancyMap=function(){function a(a,b){a.splice(b,1)}function b(a){var c="";for(s in a){var d,e=a[s];d="object"==typeof e?b(e):e,c=c+","+s+":"+d}return c}var c=new Array,d=new Array,e=new Array,f=this,g=function(a){return c[a]};f.get=g;var h=function(a){return c[d[a]]};f.getByIndex=h;var i=function(a){return null!=e[a]};f.has=i;var j=function(a,b){e[a]||(d[d.length]=a,e[a]="exist"),c[a]=b};f.put=j;var k=function(){return d};f.getKeys=k;var l=function(a,b){"undefined"==typeof b&&(b=!0),a.each(function(a,c){!b&&g(a)||j(a,c)})};f.putAll=l;var m=function(a){for(var b=k(),c=0,d=b.length;d>c;c++){var e=b[c],f=a(e,g(e));if("undefined"!=typeof f&&(0==f||null==f))break}};f.each=m;var n=function(){return d.length};f.size=f.getLength=n;var o=function(b){for(var f=k(),g=0,h=f.length;h>g;g++){var i=f[g];i==b&&(a(d,g),c[b]=null,e[b]=null)}};f.remove=f.del=o;var p=function(a){for(var b=0,c=d.length;c>b;b++)if(d[b]===a)return b};f.getKeyIdx=f.getKeyIndex=p;var q=function(){c=new Array,d=new Array,e=new Array};f.clean=q;var r=function(a){var c=[],d="object"==typeof a?!0:!1;return m(function(e,f){var g,h;f===a?c[c.length]=e:(d?(g=f+":"+b(f),h=a+":"+b(a)):(g=f,h=a),g===h&&(c[c.length]=e))}),c};f.getKeysByVal=r};var g=window.jsrequire={},h=[],i=new FancyMap,j=new FancyMap,k={};g.define=function(b){k=a(k,b);var c=k.paths;if(c)for(key in c)h[key]=c[key];var d=k.css;if(d&&q(d))for(var e=0,f=d.length;f>e;e++)j.put(d[e],!1)};var l=function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d];n(f,c),c[c.length]=p(f)}o(c,b)};g.load=function(a){var b=p(a);b&&".css"==b.slice(-4)?j.put(b,!1):i.put(b,!1)};var m=function(a){var b=[];i.each(function(a){b[b.length]=p(a)}),o(b,a)};g.ready=function(a,b){j.each(function(a){u(a)}),"function"==typeof a&&m(a),q(a)&&"function"==typeof b&&l(a,b)};var n=function(a,b){var c=d(a);if(c)for(var e=0,f=c.length;f>e;e++){var g=c[e];n(g,b),b[b.length]=p(g)}},o=function(a,c){"string"==typeof a&&(a=[a]);for(var d=new FancyMap,e=0,f=a.length;f>e;e++){var g=a[e];d.put(g,!1)}i.putAll(d,!1),b(i,c)},p=function(a){return h[a]?h[a]:a},q=function(a){return"object"!=typeof a?!1:"[object Array]"===Object.prototype.toString.call(a)},r=[],t=[],u=function(a){if(!t[a]&&null!=document.getElementsByTagName("head")){var b=document.getElementsByTagName("HEAD").item(0),c=document.createElement("link");b.appendChild(c);try{c.rel="stylesheet",c.type="text/css",c.href=a}catch(d){try{c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",a)}catch(d){}}return t[a]=!0,c}}}();